
<h1 align="center">ТЕСТОВОЕ ЗАДАНИЕ</h1>


## Описание
<p align="center">

### Данное тестовое задание выполнено в формате простейшего **интернет-магазина** с использованием следующего стека технологий и протестировано:

- **Python 3.10** восокоуровневый язык программирования
- **FastApi** веб фреймворк для создания быстрых веб приложений
- **Postgresql** СУБД
- **SqlAlchemy** фреймворк для осуществления доступа к данным в БД
- **alembic** инструмент для управления миграциями в БД в проектах, использующих SqlAlchemy
-  Операционная система **Ubuntu 24.04.1** , использовалась для тестирования
- Docker v27.4.1, для запуска проекта в контейнере
- docker compose v2.32.1 для запуска контейнеров с **FastApi** и с **Postgresql** работающих в связке

### В проекте реализованы следующие наборы данных: ###

- таблица **users** для хранения пользователей
- файл **products** для хранения товаров

в таблице **users** реализовано хранение данных о пользователях, основные поля:
- **phone_number** имеет уникальное значение в БД, должно состоять из "+" и цифр
- **email** имеет уникальное значение в БД, используется для авторизации пользователей в системе
- **password** пароль, хранится зашифрованным
- **is_active** булево значение, используется при частичном удалении пользователя - профиль не активен
- **role** для хранения роли пользателя. Мною реализованы простейшие роли для пользователей (admin, manager, user).

в файле **products.json** реализовано хранение данныз о товарах

### Роли пользователей ###

Для доступа к соответствующим ендпойнтам в проекте реализованы следующие роли:
- **USER** зарегистрированный и авторизованный пользователь, имеет доступ к использованию ендпойнтов и методов:
  + /auth/me метод get_me &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - вывод информации о пользователе
  + /auth/update-profile метод update_profile &nbsp; - обновление изменение данных в профиле пользователя
  + /auth/remove метод remove_user &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - удаление профиля пользователем
  + /roducts/ метод get_all_products &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- просмотр каталога товаров магазина 

- **MANAGER** авторизованный менеджер магазина, имеет доступ ко всем вышеперечисленным ендпойнтам и методам, а так же к следующим:
  + /products/update/ метод update_product &nbsp;&nbsp;&nbsp;&nbsp;- изменение данных товара
  + /products/delete/ метод delete_product &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- удаление товара
+ **ADMIN** администратор, имееет доступ ко всем без исключения ендпойнтам и методам

### Система аутентификации была реализована с помощью инъекций зависимостей FastApi, проверяется принадлежность пользователя к той или иной роли. Так же была идея реализовать хранение уровней доступа пользователя в виде списка в поле таблицы users ###
  
## Установка ##

### Для устновки и запуска проекта необходимо в выбранном каталоге выполнить клонирование репозитория ###

```
git clone https://github.com/alexanderone89/test_auth.git
```
### Перейти в каталог **test_auth** ###

```
cd test_auth
```
### Запустить **docker compose** ###

```
sudo docker compose up
```

### Проект доступен по ссылке ###
```
http://localhost:8000/docs
```

### Также есть возможность протестировать работу api через эту ссылку ###
```
https://routinely-legitimate-shoveler.cloudpub.ru/docs
```
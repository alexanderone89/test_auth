
<h1 align="center">ТЕСТОВОЕ ЗАДАНИЕ</h1>


## Описание
<p align="center">

### Данное тестовое задание выполнено в формате простейшего **интернет-магазина** с использованием следующего стека технологий и протестировано:

- **Python 3.10** восокоуровневый язык программирования
- **FastApi** веб фреймворк для создания быстрых веб приложений
- **Postgresql** СУБД
- **SqlAlchemy** фреймворк для осуществления доступа к данным в БД
- **alembic** инструмент для управления миграциями в БД в проектах, использующих SqlAlchemy
-  Операционная система **Ubuntu 24.04.1** , использовалась для тестирования
- Docker v27.4.1, для запуска проекта в контейнере
- docker compose v2.32.1 для запуска контейнеров с **FastApi** и с **Postgresql** работающих в связке

### В проекте реализованы следующие наборы данных: ###

- таблица **users** для хранения пользователей
- таблица **roles** для хранения ролей пользователей
- файл **products** для хранения товаров

в таблице **users** реализовано хранение данных о пользователях, основные поля:
- **phone_number** имеет уникальное значение в БД, должно состоять из "+" и цифр, проверяется валидатором
- **email** имеет уникальное значение в БД, используется для авторизации пользователей в системе
- **password** пароль, хранится зашифрованным, проверяется валидатором на равенство с паролем-повтором
- **is_active** булево значение, используется при частичном,"мягком" удалении пользователя - профиль не активен

в таблице **roles** реализовано хранение данных о ролях пользователей,а так же соответсвующих разрешений для ролей, поля таблицы:
- **roles** роль 
- **permissions** разрешение на доступ к ресурсам


в файле **products.json** реализовано хранение информации о товарах

### Роли пользователей ###

Для доступа к соответствующим ендпойнтам в проекте реализованы основные роли: 
 - "user" - доступ к ручкам get_me,update_profile,remove-user,get_all_products
 - "manager" - доступ к ручкам get_me,update_profile,remove-user,get_all_products,update_product,delete_product
 - "admin" - имеет доступ ко всем ручкам кроме update_profile,remove-user


### Система аутентификации ### 
Была реализована с помощью инъекций зависимостей FastApi в виде
класса PermissionsCheck, который парсит токен доступа пользователя куда при 
log-in записывается информация о роли и разрешениях пользователя. 
  
## Установка ##

### Для устновки и запуска проекта необходимо в выбранном каталоге выполнить клонирование репозитория ###

```
git clone https://github.com/alexanderone89/test_auth.git
```
### Перейти в каталог **test_auth** ###

```
cd test_auth
```
### Запустить **docker compose** ###

```
sudo docker compose up
```

### Проект доступен по ссылке ###
```
http://localhost:8000/docs
```
